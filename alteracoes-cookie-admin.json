{
  "titulo": "Correção do Cookie admin_token na Edge Function admin-auth",
  "data": "2024-09-25",
  "arquivos_alterados": [
    {
      "arquivo": "supabase/functions/admin-auth/index.ts",
      "tipo": "modificacao",
      "alteracoes": [
        {
          "linhas": "111-136",
          "descricao": "Configuração do cookie admin_token no login",
          "detalhes": [
            "Alterado SameSite de 'Strict' para 'None' para permitir cookies cross-site",
            "Alterado Max-Age de 86400 (24 horas) para 3600 (1 hora)",
            "Reorganizada ordem dos atributos do cookie para: HttpOnly; Secure; SameSite=None; Path=/; Max-Age=3600",
            "Alterado comentário de '24 horas' para '1 hora' para refletir a nova duração"
          ]
        },
        {
          "linhas": "179-190", 
          "descricao": "Configuração do cookie admin_token no logout",
          "detalhes": [
            "Alterado SameSite de 'Strict' para 'None' para consistência",
            "Reorganizada ordem dos atributos do cookie para: HttpOnly; Secure; SameSite=None; Path=/; Max-Age=0"
          ]
        }
      ]
    }
  ],
  "problemas_corrigidos": [
    "Cookie admin_token não estava sendo definido devido ao SameSite=Strict em contexto cross-origin",
    "Duração do token ajustada de 24 horas para 1 hora conforme solicitado",
    "Ordem dos atributos do cookie padronizada para melhor compatibilidade"
  ],
  "configuracao_cookie_final": {
    "nome": "admin_token",
    "atributos": "HttpOnly; Secure; SameSite=None; Path=/; Max-Age=3600",
    "duracao": "1 hora (3600 segundos)",
    "contexto": "Cross-site com credenciais incluídas"
  }
}